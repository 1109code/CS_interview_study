# 운영체제

    1. 프로세스와 스레드의 차이
    2. 데드락
    3. 세마포어 & 뮤텍스
    4. 컨텍스트 스위칭
    5. 선점형 스케줄링 비선점형 스케줄링
    6. paging system segmentation system
    7. paging algorithm
    8. caching
    9. 가상 메모리(단편화) + page fault 
    10. 메모리 구조
    11. 디스크 스케줄링
    12. raid

## 1. 프로세스와 스레드의 차이

### 프로세스 (Process)

![](assets/5주차_유선준.md/2023-02-24-17-36-38.png)

✔ **실행을 위해 시스템 커널에 등록된 작업**
- 커널에 등록되고 커널의 관리 하에 있는 작업
- 각종 자원들을 요청하고 할당 받을 수 있는 개체
- 프로세스 관리 블록 (PCB)을 할당 받은 개체
- 능동적인 개체(active entity): 실행 중에 각종 자원을 요구, 할당, 반납하며 진행

✔ **자원을 할당 받고, 목표를 이루기 위해 할당받은 자원을 제어 한다**

✔ PCB (Process Control Block)
- 커널 공간 내에 존재하는 프로세스 관리에 필요한 정보를 저장하기 위한 공간

#### 프로세스의 상태 (state)

![](assets/5주차_유선준.md/2023-02-24-17-34-55.png)

![](assets/5주차_유선준.md/2023-02-24-17-35-03.png)

### 스레드 (Thread)

![](assets/5주차_유선준.md/2023-02-24-17-39-59.png)

✔ **프로세스의 실행 단위**
- 프로세스의 **제어 부분만 분리**해 프로세스가 할당 받은 자원을 제어한다

✔ 각 스레드마다 **자신의 작업 영역(Stack)**을 할당 받는다

✔ **자원(Resource) 공유**
 - 효율성 / 경제성 증가 (context switching x)

### 프로세스 vs 스레드

✔ 프로세스는 시스템 커널에 등록 돼 자원을 할당 받은 작업이며, 스레드는 프로세스의 실행단위로 할당 받은 자원은 제어한다.

✔ **각각 자원을 할당 받는 프로세스**와 달리 **스레드는 프로세스의 자원은 공유**하고, 자신만의 작업 영억인 stack을 할당 받아서 지역데이터를 저장한다

✔ 또한 프로세스는 교체 시 context switching이 발생해 overhead가 발생하는 반면, 스레드는 멀티스레딩 등을 통해 해당 overhead를 최소화 할 수 있다.(스레드 자체도 커널 스레드의 경우 context switching 존재) 

## 2. Deadlock (데드락)

### Deadlock의 개념

![](assets/5주차_유선준.md/2023-02-24-17-52-04.png)

✔ **프로세스가 발생 가능성이 없는 이벤트를 기다리는 경우**

✔ P1은 P2가 가지고 있는 R1을, P2는 P1이 가지고 있는 R2를 요청하고 있다 -> 서로 발생 가능성이 없는 이벤트를 기다리고 있으므로 deadlock!

#### starvation vs deadlock

✔ starvation -> ready state

✔ deadlock -> asleep state

✔ **starvation은 '운이 없어서' 프로세서를 할당받지 못한 상태일 뿐 발생 가능성이 없는 것은 아니다!!**

### Deadlock 발생의 조건

✔ 자원의 특성
- Exclusive use of resources
- Non - preemptible resources

✔ 프로세스의 특성
- Hold and Wait(Partial allocation)
  - 자원을 하나 hold하고 다른 자원 요청
- Circular wait

### Deadlock Prevention

✔ 4가지 조건 중 하나 제거 -> 비현실적!

### Deadlock Avoidance

✔ 시스템을 항상 safe state(모든 프로세스가 정상적으로 종료가 가능한 상태)로 유지
- Dijkstra's Algorithm(Banker's algorithm)
  - 한 종류의 자원
- Habermann's Algorithm
  - 여러 종류의 자원

### Deadlock Detection & Recovery

✔ Deadlock 발생 방지 x

✔ 발생 확인 후 회복

✔ Detection: Graph Reduction
- RAG(Resource Allocation Graph)

✔ Recovery
- Process Tremination
- Resource Preemption


## 3. 세마포어 & 뮤텍스

### Critical Section

![](assets/5주차_유선준.md/2023-02-27-17-23-51.png)

✔ shared data (공유 데이터) or Critical data
- 여러 프로세스들이 공유하는 데이터

✔ Critical section (임계 영역)
- 공유 데이터를 접근하는 코드 영역 (code segment)

✔ 멀티 프로그래밍에서 공유 데이터에 한 번에 하나의 프로세스/스레드만 접근할 수 있도록 해야 에러가 발생하지 않는다 -> 이를 해결하기 위해 나온 게 Mutex(뮤텍스) / Semaphore(세마포어)

### Mutex (Mutual Exclusion)

![](assets/5주차_유선준.md/2023-02-27-17-39-02.png)

✔ 임계구역을 가진 스레드들의 실행시간이 서로 겹치지 않고 각각 단독으로 실행(상호배제 Mutual Exclution)되도록 하는 기술

✔ Dekker's Algorithm
- flag / turn 활용

✔ Petersen's Algorithm
- Dekker's algorithm의 간단한 버전

✔ Spinlock
- Busy waiting 상태로 대기하면서 임계영역 진입 가능 여부 검사

### Semaphore 

✔ 프로세스 n개의 상호배제 문제 (counting semaphore)

✔ Signaling 방식
- 프로세스가 임계영역을 빠져 나오면서 ready queue있는 프로세스를 wake up

### Mutex vs Semaphore

✔ 세마포어는 뮤텍스(상호배제)를 달성하기 위한 소프트웨어 단위의 기술 중 하나

✔ 세마포어가 뮤텍스가 구분되는 점은 **동기화 대상의 개수**, **lock/signaling 방식**의 차이 
