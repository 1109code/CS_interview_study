# 1. 데이터베이스(DataBase)란?

데이터베이스(DB: database)는 통합하여 관리되는 데이터의 집합체

중복된 데이터를 없애고, 자료를 구조화하여, 효율적인 처리를 할 수 있도록 관리

데이터베이스는 응용 프로그램과는 다른 별도의 미들웨어에 의해 관리

데이터베이스 관리 시스템(DBMS: Database Management System) : 데이터베이스를 관리하는 미들웨어

---

### 데이터베이스의 특징

1.  사용자의 질의에 대하여 즉각적인 처리와 응답

2. 생성, 수정, 삭제를 통하여 항상 최신의 데이터를 유지

3. 사용자들이 원하는 데이터를 동시에 공유

4. 사용자가 원하는 데이터를 주소가 아닌 내용에 따라 참조

5. 응용프로그램과 데이터베이스는 독립 →데이터의 논리적 구조와 응용프로그램은 별개 동작

---

# 2. 데이터베이스 언어 - SQL(Structured Query Language)

SQL(Structured Query Language)은 데이터베이스에서 데이터를 정의, 조작, 제어하기 위해 사용하는 언어

1. DDL(Data Definition Language)

데이터베이스나 테이블 등을 생성, 삭제하거나 그 구조를 변경하기 위한 명령어

`CREATE, ALTER, DROP`

2. DML(Data Manipulation Language)

데이터베이스에 저장된 데이터를 처리하거나 조회, 검색하기 위한 명령어

`INSERT, UPDATE, DELETE, SELECT` 등

3. DCL(Data Control Language)

데이터베이스에 저장된 데이터를 관리하기 위하여 데이터의 보안성 및 무결성 등을 제어하기 위한 명령어

`GRANT, REVOKE` 등

# 3. RDBMS와 NoSQL

### 관계형 데이터베이스

데이터를 테이블 형태로 저장하고 관리

테이블은 키와 값의 관계를 나타냄

데이터의 종속성을 관계(relationship)로 표현하는 것이 관계형 데이터베이스의 특징

![http://www.tcpschool.com/lectures/img_mysql_table.png](http://www.tcpschool.com/lectures/img_mysql_table.png)

테이블은 이름을 가지고 있으며 행과 열, 그에 대응하는 값을 가짐

테이블이 다른 테이블들과 관계를 맺고 모여있는 집합체

- 특징
  - 데이터의 분류, 정렬, 탐색 속도가 빠르다
  - 오랫동안 사용된 만큼 신뢰성이 높고 어떤 상황에서도 데이터의 무결성을 보장함
  - 기존에 작성된 스키마를 수정하기 어려움
  - 데이터베이스의 부하를 분석하는 것이 어려움
- 용어
  **1. 열(column)**
  각각의 열은 유일한 이름을 가지며 자신만의 타입을 가짐
  필드(field) 또는 속성(attribute)이라고도 불림
  **2. 행(row)**
  행은 관계된 데이터의 묶음, 한 테이블의 모든 행은 같은 수의 열을 가지고 있음
  튜플(tuple) 또는 레코드(record)라고도 불림
  **3. 값(value)**
  테이블은 각각의 행과 열에 대응하는 값을 가짐
  이러한 값은 열의 타입에 맞는 값이어야 함
  **4. 키(key)**
  테이블에서 행의 식별자로 이용되는 열을 키(key) 또는 기본 키(primary key)라고 함
  테이블에 저장된 레코드를 고유하게 식별하는 후보 키(candidate key) 중에서 데이터베이스 설계자가 지정한 속성을 의미
  **5. 관계(relationship)**
  테이블 간의 관계 - 관계를 맺는 테이블의 수에 따라 나눔
  ![http://www.tcpschool.com/lectures/img_mysql_relationship.png](http://www.tcpschool.com/lectures/img_mysql_relationship.png)
  1. 일대일(one-to-one) 관계

  2. 일대다(one-to-many) 관계

  3. 다대다(many-to-many) 관계
  관계형 데이터베이스에서 이런 관계를 나타내기 위해 외래 키(foreign key) 사용
  외래 키 : 한 테이블의 키 중에서 다른 테이블의 행(row)을 식별할 수 있는 키
  **6. 스키마(schema)**
  테이블을 디자인하기 위한 청사진
  테이블의 각 열에 대한 항목과 타입, 기본 키와 외래 키도 나타냄
  ![http://www.tcpschool.com/lectures/img_mysql_diagram.png](http://www.tcpschool.com/lectures/img_mysql_diagram.png)

### 비관계형 데이터베이스

데이터를 문서, 키-값 쌍 등으로 저장하고 관리

### RDBMS

SQL을 사용하여 데이터를 관리

데이터는 릴레이션(테이블) 형태로 저장

ACID(원자성, 일관성, 고립성, 지속성) 트랜잭션을 지원

MySQL, Oracle, SQL Server 등

정형화된 데이터를 다루는 상황에서 적합

### NoSql

SQL을 사용하지 않음

데이터는 키-값 형태, 컬럼 패밀리 형태, 문서 형태 등으로 저장

비관계형 데이터베이스 시스템은 수평적 확장성이 뛰어나고, 대규모 분산 시스템에서의 성능도 우수

MongoDB, Cassandra, Redis 등이 NoSql의 대표적인 예

대규모 데이터나 비정형화된 데이터를 다루는 상황에서 적합

# 4. Indexing

추가적인 쓰기 작업과 저장 공간을 활용하여 데이터베이스 테이블의 검색 속도를 향상시키기 위한 자료구조

DBMS는 index를 항상 최신의 정렬된 상태로 유지해야 원하는 값을 빠르게 탐색할 수 있다. 그렇기 때문에 인덱스가 적용된 컬럼에 INSERT, UPDATE, DELETE가 수행된다면 각각 다음과 같은 연산을 추가적으로 해주어야 하며 그에 따른 오버헤드가 발생한다.

- INSERT: 새로운 데이터에 대한 인덱스를 추가함
- DELETE: 삭제하는 데이터의 인덱스를 사용하지 않는다는 작업을 진행함
- UPDATE: 기존의 인덱스를 사용하지 않음 처리하고, 갱신된 데이터에 대해 인덱스를 추가함

# 5. 정규화

1. 정규화는 데이터의 일관성, 최소한의 데이터 중복, 최대한의 데이터 유연성을 위한 방법이며 데이터를 분해하는 과정

2. 정규화는 데이터 중복을 제거하고 데이터 모델의 독립성을 확보하기 위한 방법

3. 정규화된 모델은 테이블로 분해되고 , Join을 수행하며 하나의 합집합으로 만들수 있다

| 제1정규화  | 속성(Attribute)의 원자성을 확보한다 중복값을 제거한다 기본키를 설정      |
| ---------- | ------------------------------------------------------------------------ |
| 제2정규화  | 기본키의 2개 이상의 속성으로 이루어진 경우, 부분 함수 종속성을 제거      |
| 제 3정규화 | 기본키를 제외한 칼럼 간에 종속성을 제거한다 즉 , 이행 함수 종속성을 제거 |
| BCNF       | 기본키를 제외하고 후보키가 있는 경우, 후보키가 기본키를 종속시키면 분해  |

# 6. 반정규화

**1. 데이터베이스의 성능 향상을 위하여, 데이터 중복을 허용하고 조인을 줄이는 성능 향상 기법**

**2. 반정규화는 조회(Select) 속도를 향상시키지만, 데이터 모델의 유연성은 낮아짐**

**반정규화를 수행하는 이유?**

**1. 정규화에 충실하면 종속성, 활용설은 향상되지만 수행 속도가 느려지는 경우**

**2. 다량의 범위를 자주 처리해야 하는 경우**

**3. 요약/집계 정보가 자주 요구되는 경우**

**반정규화 절차**

| 반정규화 절차     | 설명                                                        |
| ----------------- | ----------------------------------------------------------- |
| 대상 조사 및 검토 | 데이터 처리 범위, 통계성 등을 확인해서 반정규화 대상을 조사 |
| 다른 방법 검토    | 반정규화를 수행하기 전에 다른 방법이 있는지 검토            |
| 반정규화 수행     | 테이블, 속성, 관계 등을 반정규화                            |

**슈퍼 타입 및 서브 타입 변환 방법**

| 변환 방법       | 설명                                                                          |
| --------------- | ----------------------------------------------------------------------------- |
| One To One Type | 슈퍼 타입과 서브 타입을 개별 테이블로 도출                                    |
| Plus Type       | 슈퍼 타입과 서브 타입 테이블로 도출                                           |
| Single Type     | 슈퍼 타입과 서브 타입을 하나의 테이블로 도출하다 조인 성능이 좋고 관리가 편함 |

# 7. 트랜젝션

## 트랜잭션

트랜잭션의 커밋(commit)은 데이터베이스에 작성된 내용을 영구적으로 저장한다는 의미, 롤백(rollback)은 이전 상태로 되돌린다는 의미

트랜잭션은 데이터베이스에서의 일관성과 무결성을 보장

트랜잭션은 데이터베이스의 상태를 변화시키는 작업의 단위

일련의 작업이 전부 성공적으로 수행되거나, 전부 실패하는 원자성(Atomicity)을 보장, 일관성(Consistency), 격리성(Isolation), 지속성(Durability)의 특성 가짐

### **Atomicity(원자성)**

**1.** 트랜잭션의 연산은 데이터베이스에 모두 반영되든지 아니면 전혀 반영되지 않아야 한다.

**2.** 트랜잭션 내의 모든 명령은 반드시 완벽히 수행되어야 하며, 모두가 완벽히 수행되지 않고 어느하나라도 오류가 발생하면 트랜잭션 전부가 취소되어야 한다.

### **Consistency(일관성)**

**1.** 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환한다.

**2.** 시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야 한다.

### **Isolation(독립성,격리성)**

**1.** 둘 이상의 트랜잭션이 동시에 병행 실행되는 경우 어느 하나의 트랜잭션 실행중에 다른 트랜잭션의 연산이 끼어들 수 없다.

**2.** 수행중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다.

### **Durablility(영속성,지속성)**

**1.** 성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야 한다.

## **트랜잭션 연산 및 상태**

### **Commit연산**

**1.** Commit 연산은 한개의 논리적 단위(트랜잭션)에 대한 작업이 성공적으로 끝났고 데이터베이스가 다시 일관된 상태에 있을 때, 이 트랜잭션이 행한 갱신 연산이 완료된 것을 트랜잭션 관리자에게 알려주는 연산이다.

### **Rollback연산**

**1.** Rollback 연산은 하나의 트랜잭션 처리가 비정상적으로 종료되어 데이터베이스의 일관성을 깨뜨렸을 때, 이 트랜잭션의 일부가 정상적으로 처리되었더라도 트랜잭션의 원자성을 구현하기 위해 이 트랜잭션이 행한 모든 연산을 취소(Undo)하는 연산이다.

**2.** Rollback시에는 해당 트랜잭션을 재시작하거나 폐기한다.

### **트랜잭션의 상태**

[https://t1.daumcdn.net/cfile/tistory/999C55345B6D2ED308](https://t1.daumcdn.net/cfile/tistory/999C55345B6D2ED308)

**활동(Active) :** 트랜잭션이 실행중인 상태

**실패(Failed) :** 트랜잭션 실행에 오류가 발생하여 중단된 상태

**철회(Aborted) :** 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태

**부분 완료(Partially Committed) :** 트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태

**완료(Committed) :** 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태

[https://coding-factory.tistory.com/226](https://coding-factory.tistory.com/226)

# 8. Join

J데이터베이스에서 두 개 이상의 테이블에서 원하는 데이터를 연결해서 검색하기 위해 사용하는 방법

여러 테이블에서 필요한 데이터를 하나의 결과로 출력

JOIN을 사용하는 이유는 데이터베이스에서 테이블을 분리해서 저장하기 때문

### INNER JOIN

두 개의 테이블에서 공통된 값을 가진 데이터를 검색

ON 절과 함께 사용

ON 절의 조건을 만족하는 데이터만을 가져옴

```bash
문법
1. 첫번째테이블이름

INNER JOIN 두번째테이블이름

ON 조건

2. 첫번째테이블이름

JOIN 두번째테이블이름

ON 조건
```

![http://www.tcpschool.com/lectures/img_mysql_inner_join.png](http://www.tcpschool.com/lectures/img_mysql_inner_join.png)

### LEFT JOIN

LEFT JOIN은 첫 번째 테이블을 기준으로, 두 번째 테이블을 조합하는 JOIN

```bash
문법
첫번째테이블이름

LEFT JOIN 두번째테이블이름

ON 조건
```

![http://www.tcpschool.com/lectures/img_mysql_left_join.png](http://www.tcpschool.com/lectures/img_mysql_left_join.png)

### RIGHT JOIN

RIGHT JOIN은 LEFT 조인과는 반대로 두 번째 테이블을 기준으로, 첫 번째 테이블을 조합하는 JOIN

```bash
문법
첫번째테이블이름

LEFT JOIN 두번째테이블이름

ON 조건
```

![http://www.tcpschool.com/lectures/img_mysql_right_join.png](http://www.tcpschool.com/lectures/img_mysql_right_join.png)

### OUTER JOIN (Oracle에는 있지만 MySQL에는 없음)

INNER JOIN에 추가해, 한쪽의 테이블에만 있는 데이터를 검색

[http://www.tcpschool.com/mysql/mysql_multipleTable_join](http://www.tcpschool.com/mysql/mysql_multipleTable_join)

[https://pearlluck.tistory.com/46](https://pearlluck.tistory.com/46)
